let productsList = [
  {
    "error": false,
    "data": [
      {
        "c_Codigo": "012545",
        "c_Descri": "AGUA MINERAL MINALBA 355 ML",
        "n_Impuesto1": 16,
        "Precio1": 1.29,
        "PrecioOf": 0,
        "IVA": 0.2064,
        "TotalGral": 1.4964,
        "TotalOf": 0,
        "f_Inicial": "1900-01-01T00:00:00",
        "f_Final": "1900-01-01T00:00:00",
        "h_Inicial": "1900-01-01T00:00:00",
        "h_Final": "1900-01-01T00:00:00",
        "c_CodMoneda": "USD",
        "c_MonedaDesc": "Dolares",
        "c_MonedaSimbolo": "Ref",
        "n_Factor": 5.47,
        "n_Decimales": 2,
        "PrecioFicha": 1.29,
        "PrecioOfertaFicha": 0,
        "intercambio": 1,
        "CodigoIntercambio": "7591031100232",
        "qtyByCode": 1,
        "packQty": 24
      }
    ],
    "reading_type": 1,
    "datetime": "2022-06-23T10:58:32.3699884-04:00"
  },
  {
    "error": false,
    "data": [
      {
        "c_Codigo": "021183",
        "c_Descri": "MEGA QUESO DORITOS XXL FRITO LAY 420 GR",
        "n_Impuesto1": 16,
        "Precio1": 6.03,
        "PrecioOf": 0,
        "IVA": 0.9648000000000001,
        "TotalGral": 6.9948,
        "TotalOf": 0,
        "f_Inicial": "1980-01-01T00:00:00",
        "f_Final": "1980-01-01T00:00:00",
        "h_Inicial": "1899-12-30T01:00:00",
        "h_Final": "1899-12-30T01:00:00",
        "c_CodMoneda": "USD",
        "c_MonedaDesc": "Dolares",
        "c_MonedaSimbolo": "Ref",
        "n_Factor": 5.53,
        "n_Decimales": 2,
        "PrecioFicha": 6.03,
        "PrecioOfertaFicha": 0,
        "intercambio": 1,
        "CodigoIntercambio": "7591206113319",
        "qtyByCode": 1,
        "packQty": 8
      }
    ],
    "reading_type": 1,
    "datetime": "2022-07-04T11:03:13.9184103-04:00"
  },
  {
    "error": false,
    "data": [
      {
        "c_Codigo": "015177",
        "c_Descri": "PEPSI 1.5 LT",
        "n_Impuesto1": 16,
        "Precio1": 1.44,
        "PrecioOf": 0,
        "IVA": 0.2304,
        "TotalGral": 1.6703999999999999,
        "TotalOf": 0,
        "f_Inicial": "1900-01-01T00:00:00",
        "f_Final": "1900-01-01T00:00:00",
        "h_Inicial": "1900-01-01T00:00:00",
        "h_Final": "1900-01-01T00:00:00",
        "c_CodMoneda": "USD",
        "c_MonedaDesc": "Dolares",
        "c_MonedaSimbolo": "Ref",
        "n_Factor": 5.53,
        "n_Decimales": 2,
        "PrecioFicha": 1.44,
        "PrecioOfertaFicha": 0,
        "intercambio": 1,
        "CodigoIntercambio": "7591031003250",
        "qtyByCode": 1,
        "packQty": 6
      }
    ],
    "reading_type": 1,
    "datetime": "2022-07-04T11:05:32.6520428-04:00"
  },
  {
    "error": false,
    "data": [
      {
        "c_Codigo": "009312",
        "c_Descri": "GALLETA COCONUT AVELLANITAS 1 UN",
        "n_Impuesto1": 16,
        "Precio1": 3.88,
        "PrecioOf": 0,
        "IVA": 0.6208,
        "TotalGral": 4.5008,
        "TotalOf": 0,
        "f_Inicial": "1900-01-01T00:00:00",
        "f_Final": "1900-01-01T00:00:00",
        "h_Inicial": "1900-01-01T00:00:00",
        "h_Final": "1900-01-01T00:00:00",
        "c_CodMoneda": "USD",
        "c_MonedaDesc": "Dolares",
        "c_MonedaSimbolo": "Ref",
        "n_Factor": 5.53,
        "n_Decimales": 2,
        "PrecioFicha": 3.88,
        "PrecioOfertaFicha": 0,
        "intercambio": 1,
        "CodigoIntercambio": "004000011210",
        "qtyByCode": 1,
        "packQty": 1
      }
    ],
    "reading_type": 1,
    "datetime": "2022-07-04T11:06:29.1561462-04:00"
  },
  {
    "error": false,
    "data": [
      {
        "c_Codigo": "000545",
        "c_Descri": "GUACUCO CON CONCHA GRANDE FRESH FISH X KG",
        "n_Impuesto1": 0,
        "Precio1": 6,
        "PrecioOf": 0,
        "IVA": 0,
        "TotalGral": 6,
        "TotalOf": 0,
        "f_Inicial": "1900-01-01T00:00:00",
        "f_Final": "1900-01-01T00:00:00",
        "h_Inicial": "1900-01-01T00:00:00",
        "h_Final": "1900-01-01T00:00:00",
        "c_CodMoneda": "USD",
        "c_MonedaDesc": "Dolares",
        "c_MonedaSimbolo": "Ref",
        "n_Factor": 5.53,
        "n_Decimales": 2,
        "PrecioFicha": 6,
        "PrecioOfertaFicha": 0,
        "intercambio": 1,
        "CodigoIntercambio": "00538",
        "qtyByCode": 1,
        "packQty": 1
      }
    ],
    "reading_type": 1,
    "datetime": "2022-07-04T11:07:09.0602639-04:00"
  },
  {
    "error": false,
    "data": [
      {
        "c_Codigo": "000546",
        "c_Descri": "CAMACUTO FRESH FISH X KG",
        "n_Impuesto1": 8,
        "Precio1": 0.93,
        "PrecioOf": 0,
        "IVA": 0.07440000000000001,
        "TotalGral": 1.0044000000000002,
        "TotalOf": 0,
        "f_Inicial": "1900-01-01T00:00:00",
        "f_Final": "1900-01-01T00:00:00",
        "h_Inicial": "1900-01-01T00:00:00",
        "h_Final": "1900-01-01T00:00:00",
        "c_CodMoneda": "USD",
        "c_MonedaDesc": "Dolares",
        "c_MonedaSimbolo": "Ref",
        "n_Factor": 5.53,
        "n_Decimales": 2,
        "PrecioFicha": 0.93,
        "PrecioOfertaFicha": 0,
        "intercambio": 1,
        "CodigoIntercambio": "00539",
        "qtyByCode": 1,
        "packQty": 1
      }
    ],
    "reading_type": 1,
    "datetime": "2022-07-04T11:07:28.0449053-04:00"
  }
];

module.exports = {
  async getProductInfo(req, res) {
    console.log(':: getProductInfo ::');

    try {
      const id = req.params.id;
      console.log(id);

      let product = productsList.filter(item => item.data[0]['CodigoIntercambio'] == id);

      if (product.length > 0) {
        res.status(200).json(product[0]);
      } else {
        res.status(404).send("El producto a consultar no fue encontrado");
      }

    } catch (e) {
      console.log(e);
      res.status(400).send(e);
    }
  }
}
